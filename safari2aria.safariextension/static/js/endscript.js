webpackJsonp([3],{146:function(e,t,n){"use strict";function i(e,t){var n=0;return new window.Promise(function(i,o){var a=function(e){var a=document.querySelector(e);return a&&t&&"none"==a.style.display?++n>20&&(o(!1),!0):(i(a),!0)},r=setInterval(function(){a(e)&&clearInterval(r)},500)})}function o(e,t){e.value=t;var n=/^magnet|torrent$/.test(e.value);$("#newoffline-dialog").find("span:contains('确定')[class='text']").click(),n&&i("#offlinebtlist-dialog",!0).then(function(e){"文件名"==$(".content-title-name").html()&&$("a.checked-all")[0].click(),e.querySelectorAll(".dialog-footer>.g-button")[1].click()});!function e(){i("#offlinelist-dialog",!0).then(function(){o()}),i("#dialog1",!0).then(function(t){var n=t.find(".input-code"),i=void 0;n.focus(),i=setInterval(function(){4==n.val().length&&(clearInterval(i),$("#dialog1").find("span:contains('确定')[class='text']").click(),e())},200)})}()}t.a=function(e){document.querySelector(".g-button[data-button-id=b13]").click(),i("#_disk_id_2").then(function(e){return e.click(),i("#share-offline-link")}).then(function(t){o(t,e)})}},150:function(e,t,n){"use strict";t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,n){setTimeout(function(){n("timeout to get config")},1e4),window.extensionMessageListener||safari.self.addEventListener("message",function(e){var i=0;window.extensionMessageListener.forEach(function(n){e.name===n.name&&(n.cb&&n.cb(e.message||{}),t(e.message||{}),i++)}),i||n("no listener"),e.message&&e.message.hasCb&&safari.self.tab.dispatchMessage([e.name,"cb"].join("_"),{cookie:document.cookie})},!1),window.extensionMessageListener=[].concat(window.extensionMessageListener||[]).concat(e.listeners||[]),e.send&&e.send.forEach(function(e){safari.self.tab.dispatchMessage(e.name,e.params)})})}},153:function(e,t,n){var i,o,a;!function(n,r){o=[],i=r,void 0!==(a="function"==typeof i?i.apply(t,o):i)&&(e.exports=a)}(0,function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return function(){function n(e,t){var i=this;e.style.opacity&&e.style.opacity>.05?e.style.opacity=e.style.opacity-.05:e.style.opacity&&e.style.opacity<=.1?e.parentNode&&(e.parentNode.removeChild(e),t&&t()):e.style.opacity=.9,setTimeout(function(){return n.apply(i,[e,t])},1e3/30)}function i(e,n,o){n=n||{},o=o||"";for(var a in e)if(e.hasOwnProperty(a)){var r=e[a];r&&"object"===(void 0===r?"undefined":t(r))&&!(r instanceof Date||r instanceof RegExp)?i(r,n,o+a+" "):n[o]&&"object"===t(n[o])?n[o][a]=r:(n[o]={},n[o][a]=r)}return n}function o(e){var t=i(e),n=JSON.stringify(t,null,2);return n=n.replace(/"([^"]*)": \{/g,"$1 {").replace(/"([^"]*)"/g,"$1").replace(/(\w*-?\w*): ([\w\d .#]*),?/g,"$1: $2;").replace(/},/g,"}\n").replace(/ &([.:])/g,"$1"),n=n.substr(1,n.lastIndexOf("}")-1)}function a(e){var t=document.head||document.getElementsByTagName("head")[0],n=r("style");n.id="mini-toastr-styles",n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div";return document.createElement(e)}function c(e,t,n){var i=r(n.icons[t].nodeType),o=n.icons[t].attrs;for(var a in o)o.hasOwnProperty(a)&&i.setAttribute(a,o[a]);e.appendChild(i)}function s(e,t,n){var i=r();i.className=n,i.appendChild(document.createTextNode(t)),e.appendChild(i)}var u,d;if("undefined"==typeof window)return{init:function(){}};var l={error:"error",warn:"warn",success:"success",info:"info"},f={container:"mini-toastr",notification:"mini-toastr__notification",title:"mini-toastr-notification__title",icon:"mini-toastr-notification__icon",message:"mini-toastr-notification__message",error:"-"+l.error,warn:"-"+l.warn,success:"-"+l.success,info:"-"+l.info},m={types:l,animation:n,timeout:3e3,icons:{},appendTarget:document.body,node:r(),style:(d={},e(d,"."+f.container,{position:"fixed","z-index":99999,right:"12px",top:"12px"}),e(d,"."+f.notification,(u={cursor:"pointer",padding:"12px 18px",margin:"0 0 6px 0","background-color":"#000",opacity:.8,color:"#fff","border-radius":"3px","box-shadow":"#3c3b3b 0 0 12px",width:"300px"},e(u,"&."+f.error,{"background-color":"#D5122B"}),e(u,"&."+f.warn,{"background-color":"#F5AA1E"}),e(u,"&."+f.success,{"background-color":"#7AC13E"}),e(u,"&."+f.info,{"background-color":"#4196E1"}),e(u,"&:hover",{opacity:1,"box-shadow":"#000 0 0 12px"}),u)),e(d,"."+f.title,{"font-weight":"500"}),e(d,"."+f.message,{display:"inline-block","vertical-align":"middle",width:"240px",padding:"0 12px"}),d)},p={config:m,showMessage:function(e,t,n,i,o,a){var u={};Object.assign(u,this.config),Object.assign(u,a);var d=r();return d.className=f.notification+" "+f[n],d.onclick=function(){u.animation(d,null)},t&&s(d,t,f.title),u.icons[n]&&c(d,n,u),e&&s(d,e,f.message),u.node.insertBefore(d,u.node.firstChild),setTimeout(function(){return u.animation(d,o)},i||u.timeout),o&&o(),this},init:function(e){var t=this,n={};return Object.assign(n,m),Object.assign(n,e),this.config=n,a(o(n.style)),n.node.id=""+f.container,n.node.className=""+f.container,n.appendTarget.appendChild(n.node),Object.keys(n.types).forEach(function(e){p[n.types[e]]=function(t,i,o,a,r){return this.showMessage(t,i,n.types[e],o,a,r),this}.bind(t)}),this},setIcon:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.class=n.class?n.class+" "+f.icon:f.icon,this.config.icons[e]={nodeType:t,attrs:n}}};return p}()})},157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(153),o=n.n(i),a=n(146),r=n(36),c=n(150),s=n(37);window.top===window&&function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g.language||navigator.language;return b[n]&&b[n][e]?[b[n][e]," "].join(""):t.notfailback?"":[e," "].join("")}function t(){var e=window.getSelection().toString();return e.match(/^https?/)||e.match(/magnet:/)?e:null}function i(e){var t=null;return"BODY"===e.tagName?t=null:"IMG"===e.tagName&&e.src?t=e.src:e.href?t=e.href:e.parentNode&&(t=i(e.parentNode)),t}function u(e,t){console.log("disableBaiduLimit:",e.disableBaiduLimit),window.mDisableBaiduLimit=e.disableBaiduLimit,document.getElementById(t).remove()}function d(t){n.i(c.a)({send:[{name:"getConfig"}],listeners:[{name:"changeRpc",cb:function(t){o.a.success(e("Success switch the default download service to")+t)}},{name:"currentRpc",cb:function(t){o.a.success(e("The current download service is")+t)}},{name:"showMassage",cb:function(e){o.a[e.action||"success"](e.text,e.title)}},{name:"baiduLixian",cb:function(e){location.href.match(/^https?:\/\/pan\.baidu\.com/)&&n.i(a.a)(e.url)}},{name:"updateConfig",cb:function(e){var t=g||{};g=e,f(),safari.self.tab.dispatchMessage("documentReady",{cookie:document.cookie}),location.href.match(/baidu/)&&g.disableBaiduLimit!==t.disableBaiduLimit&&n.i(s.a)(u,{disableBaiduLimit:g.disableBaiduLimit})}}]})}function l(e){var n=[i(e.target)||t(),document.location.href,document.cookie];safari.self.tab.setContextMenuEventUserInfo(e,n)}function f(){if(p)return void(g.catchIframe||p.disconnect());g.catchIframe&&(p=new MutationObserver(function(e){e.some(function(e){return!("IFRAME"!==e.target.tagName||"attributes"!==e.type||"src"!==e.attributeName||!n.i(r.a)(e.target.src,g,h))&&(!e.target.src.match(/^https:\/\/127\.0\.0\.1\//)&&(safari.self.tab.dispatchMessage("downloadFromIframe",{url:e.target.src,cookie:document.cookie}),e.target.src="https://127.0.0.1/",!1))})}),p.observe(document.body,{attributes:!0,attributeFilter:["src"],attributeOldValue:!0,characterData:!1,characterDataOldValue:!1,childList:!1,subtree:!0}))}function m(){h.isCommandPressed=!!h[91],h.isShiftPressd=!!h[16],h.isOptionPressd=!!h[18],safari.self.tab.dispatchMessage("keyPress",{keyPressed:h})}var p,g,h={},b={"zh-CN":{"Success switch the default download service to":"成功切换默认下载服务至","The current download service is":"当前下载服务为"}};document.onkeydown=function(e){var t=e.charCode?e.charCode:e.keyCode;h[t]=!0,m()},document.onkeyup=function(e){var t=e.charCode?e.charCode:e.keyCode;delete h[t],m()},window.onblur=function(e){h={},m()},function(){o.a.init({appendTarget:document.body,timeout:5e3}),document.addEventListener("contextmenu",l,!1),d(),m()}()}()},36:function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&!n[82]&&t.enableTypefiles?!n.isCommandPressed:n.isCommandPressed){if(e.match(/magnet:[^\\"]+/))return!0;var i=e.substr(e.lastIndexOf(".")+1);i=i.toLowerCase();var o=t.filetypes?t.filetypes.split(" "):[];if(n.isShiftPressd)return!0;for(var a=0;a<o.length;a++)if(i===o[a].toLowerCase())return!0}}t.a=i},37:function(e,t,n){"use strict";function i(){var e=(new Date).getTime()*Math.random(),t=0;e=e.toString();for(var n=0;n<e.length;n++)t=~~((t<<5)-t+e.charCodeAt(n));return Math.abs(t)}t.a=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.id=["run_js",i()].join("_"),n.innerHTML=["(",e.toString(),")(",JSON.stringify(t),',"',n.id,'")'].join(""),document.documentElement.appendChild(n)}}},[157]);